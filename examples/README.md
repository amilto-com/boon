# TOON and BOON Examples

**Author:** William Gacquer - [Amilto](https://amilto.com)

This directory contains example files and demonstration scripts for TOON and BOON formats.

## ğŸ“ Files

### Sample Data

- **`sample-data.json`** - Original JSON data (user management system example)
- **`sample-data.toon`** - TOON version (Token-Oriented Object Notation) - compact text format
- **`sample-data.boon`** - BOON version (Binary Object Notation) - optimized binary format *(generated by script)*

### Demonstration Scripts

- **`demo-conversion.ts`** - Complete conversion cycle demonstration script
- **`simple-usage.ts`** - Simple usage example for BOON and TOON packages
- **`compare-formats.ts`** - Visual comparison of all three formats side by side
- **`compare-compression.ts`** - Comparison with standard compression formats (Gzip, Brotli)
- **`inspect-boon.ts`** - Detailed inspection of a BOON binary file

### Healthcare Examples (HL7 FHIR)

- **`fhir-patient-example.json`** - Official HL7 FHIR R4 Patient resource example
- **`fhir-diagnostic-example.json`** - Large FHIR bundle with diagnostic reports (82% base64)
- **`fhir-bundle-example.json`** - FHIR search result bundle
- **`fhir-healthcare-benchmark.mjs`** - Healthcare data roundtrip benchmark

## ğŸš€ Usage

### Run Demonstrations

```bash
# Complete conversion cycle with statistics
pnpm tsx examples/demo-conversion.ts

# Simple usage example
pnpm tsx examples/simple-usage.ts

# Visual format comparison
pnpm tsx examples/compare-formats.ts

# Comparison with standard compression
pnpm tsx examples/compare-compression.ts

# BOON file inspection
pnpm tsx examples/inspect-boon.ts
pnpm tsx examples/inspect-boon.ts examples/sample-data.boon

# HL7 FHIR healthcare benchmark
node examples/fhir-healthcare-benchmark.mjs
```

The `demo-conversion.ts` script will:
1. âœ… Load JSON data
2. âœ… Convert JSON â†’ TOON
3. âœ… Convert TOON â†’ BOON (binary)
4. âœ… Verify integrity with BOON â†’ JSON roundtrip
5. âœ… Display size comparisons

### Manual Conversion with CLI

```bash
# JSON to TOON
pnpm toon examples/sample-data.json -o examples/output.toon

# TOON to JSON
pnpm toon examples/sample-data.toon -o examples/output.json
```

## ğŸ“Š Format Comparison

For `sample-data.json`:

| Format | Type | Typical Size | Ratio |
|--------|------|--------------|-------|
| JSON | Text | ~1800 bytes | 100% |
| TOON | Text | ~1100 bytes | ~60% |
| BOON | Binary | ~800 bytes | ~45% |

### Comparison with Standard Compression

For `comprehensive-data.json` (14 KB):

| Format | Size | Ratio | Savings |
|--------|------|-------|---------|
| **TOON + Brotli** | 3,097 B | 21.7% | **78.3%** ğŸ† |
| **BOON + Brotli** | 3,324 B | 23.3% | **76.7%** |
| JSON + Brotli | 3,396 B | 23.8% | 76.2% |
| TOON + Gzip | 3,780 B | 26.5% | 73.5% |
| **BOON + Gzip** | 3,924 B | 27.5% | **72.5%** |
| JSON + Gzip | 4,212 B | 29.5% | 70.5% |
| **BOON (raw)** | 7,343 B | 51.4% | **48.6%** |
| TOON (raw) | 9,737 B | 68.2% | 31.8% |
| JSON (raw) | 14,273 B | 100% | - |

**Key Points:**
- ğŸ† **TOON + Brotli**: Best overall compression
- âš¡ **BOON raw**: No decompression needed, ultra-fast direct decoding
- ğŸŒ **BOON + Gzip**: Best compromise for web (compatible with all browsers)
- ğŸ“¦ **BOON** always more compact than JSON, even with compression

### Advantages of Each Format

**JSON**
- âœ… Universal standard
- âœ… Readable by all tools
- âŒ Verbose (repeated keys, quotes, braces)

**TOON**
- âœ… Compact and human-readable
- âœ… Optimized for LLMs (token savings)
- âœ… Text format (diff-friendly, Git-friendly)
- âœ… Tabular array support

**BOON**
- âœ… Maximum compactness (binary format)
- âœ… Optimized type encoding (int8, int16, int32, float32, float64)
- âœ… Fast to encode/decode
- âœ… Ideal for storage and transmission
- âŒ Not directly readable (requires decoding)

## ğŸ”„ Conversion Cycle

```
JSON â”€â”€â”€â”€â”€â”€â”
           â”œâ”€â”€â†’ TOON â”€â”€â”€â†’ BOON
           â”‚              â†“
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              (roundtrip)
```

All three formats are interconvertible without data loss for:
- Primitives: null, boolean, number, string
- Structures: objects, arrays
- Nesting: unlimited depth

## ğŸ§ª Tests

To run the test suite:

```bash
pnpm test
```

All format conversions are covered by unit tests guaranteeing data integrity.
